<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

</body>
<script>
    var track = function (arr, fn, len) {
        var timer,j= 0,length=arr.length;

        var start = function () {
            for(var i=0;i<len&&j<length;i++,j++){
                fn(arr.shift());
            }
        };

        return function(){
            start();
            timer=setInterval(function(){
                if(!arr.length){
                    clearInterval(timer);
                }
                start();
            },500)
        }
    };

    var arr = [];
    for (var i = 1; i <=100; i++) {
        arr.push(i);
    }

    var t=track(arr, function (i) {
        var div = document.createElement("div");
        div.innerHTML=i;
        document.body.appendChild(div);
    }, 20);

    t();

</script>
</html>