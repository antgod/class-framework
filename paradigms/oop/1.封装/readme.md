1. 封装数据

2. 封装实现

    封装的目的是将信息隐藏，封装应该被视为“任何形式的封装”，也就是说，封装不仅仅是隐藏数据，还包括隐藏实现细节、设计细节以及隐藏对象的类型等。

    从封装实现细节来讲，封装使得对象内部的变化对其他对象而言是透明的，也就是不可见的。
    对象对它自己的行为负责。其他对象或者用户都不关心它的内部实现。封装使得对象之间的耦合
    变松散，对象之间只通过暴露的API 接口来通信。当我们修改一个对象时，可以随意地修改它的
    内部实现，只要对外的接口没有变化，就不会影响到程序的其他功能。

    封装实现细节的例子非常之多。拿迭代器来说明，迭代器的作用是在不暴露一个聚合对象的
    内部表示的前提下，提供一种方式来顺序访问这个聚合对象。我们编写了一个each 函数，它的
    作用就是遍历一个聚合对象，使用这个each 函数的人不用关心它的内部是怎样实现的，只要它
    提供的功能正确便可以。即使each 函数修改了内部源代码，只要对外的接口或者调用方式没有
    变化，用户就不用关心它内部实现的改变。

3. 封装类型

    封装类型是静态类型语言中一种重要的封装方式。一般而言，封装类型是通过抽象类和接口
    来进行的①。把对象的真正类型隐藏在抽象类或者接口之后，相比对象的类型，客户更关心对象
    的行为。在许多静态语言的设计模式中，想方设法地去隐藏对象的类型，也是促使这些模式诞生
    的原因之一。比如工厂方法模式、组合模式等。

    当然在JavaScript 中，并没有对抽象类和接口的支持。JavaScript 本身也是一门类型模糊的语
    言。在封装类型方面，JavaScript 没有能力，也没有必要做得更多。对于JavaScript 的设计模式实
    现来说，不区分类型是一种失色，也可以说是一种解脱。在后面章节的学习中，我们可以慢慢了
    解这一点。
4. 封装变化

    从设计模式的角度出发，封装在更重要的层面体现为封装变化。

    《设计模式》一书曾提到如下文字：
    “考虑你的设计中哪些地方可能变化，这种方式与关注会导致重新设计的原因相反。
    它不是考虑什么时候会迫使你的设计改变，而是考虑你怎样才能够在不重新设计的情况
    下进行改变。这里的关键在于封装发生变化的概念，这是许多设计模式的主题。”
    这段文字即是《设计模式》提到的“找到变化并封装之”。《设计模式》一书中共归纳总结了23
    种设计模式。从意图上区分，这23 种设计模式分别被划分为创建型模式、结构型模式和行为型模式。
    拿创建型模式来说，要创建一个对象，是一种抽象行为，而具体创建什么对象则是可以变化
    的，创建型模式的目的就是封装创建对象的变化。而结构型模式封装的是对象之间的组合关系。
    行为型模式封装的是对象的行为变化。

    通过封装变化的方式，把系统中稳定不变的部分和容易变化的部分隔离开来，在系统的演变
    过程中，我们只需要替换那些容易变化的部分，如果这些部分是已经封装好的，替换起来也相对
    容易。这可以最大程度地保证程序的稳定性和可扩展性。
    从《设计模式》副标题“可复用面向对象软件的基础”可以知道，这本书理应教我们如何编
    写可复用的面向对象程序。这本书把大多数笔墨都放在如何封装变化上面，这跟编写可复用的面
    向对象程序是不矛盾的。当我们想办法把程序中变化的部分封装好之后，剩下的即是稳定而可复
    用的部分了。
